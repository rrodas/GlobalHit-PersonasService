˚ 
D/Users/user/Documents/MiProyecto/infraestructure/CountryDBContext.cs
	namespace 	
infraestructure
 
{ 
public 

class 
CountryDBContext !
:" #
	DbContext$ -
{ 
public 
CountryDBContext 
(  !
DbContextOptions! 1
<1 2
CountryDBContext2 B
>B C
optionsD K
)K L
:M N
baseO S
(T U
optionsU \
)\ ]
{^ _
}` a
public 
DbSet 
< 
City 
> 
Cities !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DbSet 
< 
State 
> 
States "
{# $
get% (
;( )
set* -
;- .
}/ 0
	protected	 
override 
void  
OnModelCreating! 0
(0 1
ModelBuilder1 =
modelBuilder> J
)J K
{ 	
modelBuilder 
. 
Entity 
<  
City  $
>$ %
(% &
)& '
.' (
ToTable( /
(/ 0
$str0 8
)8 9
;9 :
modelBuilder 
. 
Entity 
<  
City  $
>$ %
(% &
)& '
. 
Property !
(! "
c" #
=>$ &
c' (
.( )
Id) +
)+ ,
. 
HasColumnName &
(& '
$str' +
)+ ,
;, -
modelBuilder 
. 
Entity 
<  
City  $
>$ %
(% &
)& '
. 
Property !
(! "
c" #
=>$ &
c' (
.( )
Name) -
)- .
. 
HasColumnName &
(& '
$str' -
)- .
;. /
modelBuilder 
. 
Entity 
<  
City  $
>$ %
(% &
)& '
. 
HasOne 
(  
p  !
=>" $
p% &
.& '
Sate' +
)+ ,
;, -
modelBuilder 
. 
Entity 
<  
City  $
>$ %
(% &
)& '
.' (
HasKey( .
(. /
vf/ 1
=>2 4
new5 8
{9 :
vf; =
.= >
Id> @
}A B
)B C
;C D
modelBuilder   
.   
Entity   
<    
State    %
>  % &
(  & '
)  ' (
.  ( )
ToTable  ) 0
(  0 1
$str  1 9
)  9 :
;  : ;
modelBuilder!! 
.!! 
Entity!! 
<!!  
State!!  %
>!!% &
(!!& '
)!!' (
."" 
Property"" !
(""! "
c""" #
=>""$ &
c""' (
.""( )
Id"") +
)""+ ,
.## 
HasColumnName## &
(##& '
$str##' +
)##+ ,
;##, -
modelBuilder$$ 
.$$ 
Entity$$ 
<$$  
State$$  %
>$$% &
($$& '
)$$' (
.%% 
Property%% !
(%%! "
c%%" #
=>%%$ &
c%%' (
.%%( )
Name%%) -
)%%- .
.&& 
HasColumnName&& &
(&&& '
$str&&' -
)&&- .
;&&. /
modelBuilder'' 
.'' 
Entity'' 
<''  
State''  %
>''% &
(''& '
)''' (
.''( )
HasKey'') /
(''/ 0
vf''0 2
=>''3 5
new''6 9
{'': ;
vf''< >
.''> ?
Id''? A
}''B C
)''C D
;''D E
}(( 	
}** 
}++ Ï#
W/Users/user/Documents/MiProyecto/infraestructure/Migrations/20210307015727_CountryDB.cs
	namespace 	
infraestructure
 
. 

Migrations $
{ 
public 

partial 
class 
	CountryDB "
:# $
	Migration% .
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
CreateTable		 (
(		( )
name

 
:

 
$str

 
,

 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
nullable+ 3
:3 4
false5 :
): ;
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Name 
= 
table  
.  !
Column! '
<' (
int( +
>+ ,
(, -
nullable- 5
:5 6
false7 <
)< =
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 0
,0 1
x2 3
=>4 6
x7 8
.8 9
Id9 ;
); <
;< =
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
nullable+ 3
:3 4
false5 :
): ;
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Name 
= 
table  
.  !
Column! '
<' (
int( +
>+ ,
(, -
nullable- 5
:5 6
false7 <
)< =
,= >
SateId 
= 
table "
." #
Column# )
<) *
int* -
>- .
(. /
nullable/ 7
:7 8
true9 =
)= >
} 
, 
constraints 
: 
table "
=># %
{   
table!! 
.!! 

PrimaryKey!! $
(!!$ %
$str!!% 0
,!!0 1
x!!2 3
=>!!4 6
x!!7 8
.!!8 9
Id!!9 ;
)!!; <
;!!< =
table"" 
."" 

ForeignKey"" $
(""$ %
name## 
:## 
$str## 7
,##7 8
column$$ 
:$$ 
x$$  !
=>$$" $
x$$% &
.$$& '
SateId$$' -
,$$- .
principalTable%% &
:%%& '
$str%%( 0
,%%0 1
principalColumn&& '
:&&' (
$str&&) -
,&&- .
onDelete''  
:''  !
ReferentialAction''" 3
.''3 4
Restrict''4 <
)''< =
;''= >
}(( 
)(( 
;(( 
migrationBuilder** 
.** 
CreateIndex** (
(**( )
name++ 
:++ 
$str++ (
,++( )
table,, 
:,, 
$str,, 
,,,  
column-- 
:-- 
$str--  
)--  !
;--! "
}.. 	
	protected00 
override00 
void00 
Down00  $
(00$ %
MigrationBuilder00% 5
migrationBuilder006 F
)00F G
{11 	
migrationBuilder22 
.22 
	DropTable22 &
(22& '
name33 
:33 
$str33 
)33 
;33  
migrationBuilder55 
.55 
	DropTable55 &
(55& '
name66 
:66 
$str66 
)66 
;66  
}77 	
}88 
}99 Å
Y/Users/user/Documents/MiProyecto/infraestructure/Migrations/20210307024139_CountryDB_2.cs
	namespace 	
infraestructure
 
. 

Migrations $
{ 
public 

partial 
class 
CountryDB_2 $
:% &
	Migration' 0
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
AlterColumn		 (
<		( )
string		) /
>		/ 0
(		0 1
name

 
:

 
$str

 
,

 
table 
: 
$str 
,  
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
int# &
)& '
,' (
oldType 
: 
$str 
) 
;  
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str 
, 
table 
: 
$str 
,  
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
int# &
)& '
,' (
oldType 
: 
$str 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
int) ,
>, -
(- .
name 
: 
$str 
, 
table 
: 
$str 
,  
type 
: 
$str 
, 
nullable 
: 
false 
,  

oldClrType 
: 
typeof "
(" #
string# )
)) *
,* +
oldNullable   
:   
true   !
)  ! "
;  " #
migrationBuilder"" 
."" 
AlterColumn"" (
<""( )
int"") ,
>"", -
(""- .
name## 
:## 
$str## 
,## 
table$$ 
:$$ 
$str$$ 
,$$  
type%% 
:%% 
$str%% 
,%% 
nullable&& 
:&& 
false&& 
,&&  

oldClrType'' 
:'' 
typeof'' "
(''" #
string''# )
)'') *
,''* +
oldNullable(( 
:(( 
true(( !
)((! "
;((" #
})) 	
}** 
}++ ˜
Y/Users/user/Documents/MiProyecto/infraestructure/Migrations/20210307035616_CountryDB_3.cs
	namespace 	
infraestructure
 
. 

Migrations $
{ 
public 

partial 
class 
CountryDB_3 $
:% &
	Migration' 0
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
}

 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} ˜
Y/Users/user/Documents/MiProyecto/infraestructure/Migrations/20210307035649_CountryDB_4.cs
	namespace 	
infraestructure
 
. 

Migrations $
{ 
public 

partial 
class 
CountryDB_4 $
:% &
	Migration' 0
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
}

 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
} 	
} 
} ü#
R/Users/user/Documents/MiProyecto/infraestructure/repositories/CountryRepository.cs
	namespace 	
infraestructure
 
. 
repositories &
{		 
public

 

class

 
CountryRepository

 "
:

# $
ICountryRepository

% 7
{ 
private 
CountryDBContext  
_context! )
;) *
public 
CountryRepository  
(  !
CountryDBContext! 1
context2 9
)9 :
{ 	
_context 
= 
context 
?? !
throw" '
new( +!
ArgumentNullException, A
(A B
nameofB H
(H I
contextI P
)P Q
)Q R
;R S
} 	
public 
void 
Create 
( 
City 
cityEntitie  +
)+ ,
{ 	
_context 
. 
Cities 
. 
Add 
(  
cityEntitie  +
)+ ,
;, -
_context 
. 
SaveChanges  
(  !
)! "
;" #
} 	
public 
void 
Delete 
( 
int 
id !
)! "
{ 	
_context 
. 
Cities 
. 
Remove "
(" #
_context# +
.+ ,
Cities, 2
.2 3
Find3 7
(7 8
id8 :
): ;
); <
;< =
_context 
. 
SaveChanges  
(  !
)! "
;" #
} 	
public 
List 
< 
City 
> 
	GetCities #
(# $
)$ %
{ 	
var 
query 
= 
from   
City   
in   
_context   !
.  ! "
Cities  " (
join!! 
State!! 
in!! 
_context!! "
.!!" #
States!!# )
on!!* ,
City!!- 1
.!!1 2
SateId!!2 8
equals!!9 ?
State!!@ E
.!!E F
Id!!F H
select"" 
new"" 
{"" 
City"" 
,"" 
State"" $
}""% &
;""& '
var## 
x## 
=## 
query## 
.## 
ToList##  
(##  !
)##! "
;##" #
return$$ 
_context$$ 
.$$ 
Cities$$ "
.$$" #
ToList$$# )
($$) *
)$$* +
;$$+ ,
}&& 	
public(( 
City(( 
GetCity(( 
((( 
int(( 
id((  "
)((" #
{)) 	
var** 
query** 
=** 
from++ 
City++ 
in++ 
_context++ !
.++! "
Cities++" (
join,, 
State,, 
in,, 
_context,, "
.,," #
States,,# )
on,,* ,
City,,- 1
.,,1 2
SateId,,2 8
equals,,9 ?
State,,@ E
.,,E F
Id,,F H
select-- 
new-- 
{-- 
City-- 
,-- 
State-- $
}--% &
;--& '
var.. 
x.. 
=.. 
query.. 
... 
ToList..  
(..  !
)..! "
;.." #
return// 
_context// 
.// 
Cities// "
.//" #
Find//# '
(//' (
id//( *
)//* +
;//+ ,
}00 	
public22 
void22 
Update22 
(22 
City22 
CityEntitie22  +
)22+ ,
{33 	
_context44 
.44 
Cities44 
.44 
Attach44 "
(44" #
CityEntitie44# .
)44. /
;44/ 0
_context55 
.55 
Entry55 
(55 
CityEntitie55 &
)55& '
.55' (
State55( -
=55. /
EntityState550 ;
.55; <
Modified55< D
;55D E
_context66 
.66 
SaveChanges66  
(66  !
)66! "
;66" #
}77 	
}88 
}99 